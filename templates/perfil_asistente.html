{% extends "base.html" %}
{% block title %}ğŸ’¼ Perfil de Asistente{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="fas fa-briefcase me-2"></i>Perfil de Asistente</h2>
        <span class="badge bg-primary">Asistente Senior</span>
    </div>

    <!-- InformaciÃ³n del equipo -->
    <div class="card mb-4 shadow-sm">
        <div class="card-body">
            <h5>{{ assistant.name }}</h5>
            <p class="text-muted">Trabajando para: <strong>{{ assistant.doctor.username }}</strong></p>
            <p><i class="fas fa-map-marker-alt me-2"></i>
                {% if assistant.clinic %}
                    {{ assistant.clinic.name }} - {{ assistant.clinic.address }}
                {% else %}
                    Equipo General
                {% endif %}
            </p>
        </div>
    </div> 

    <!-- Tareas recibidas -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-info text-white">
            <h6 class="mb-0"><i class="fas fa-tasks me-2"></i>Tareas Asignadas a MÃ­</h6>
        </div>
        <div class="card-body">
            {% if tareas_recibidas %}
            <ul class="list-group">
                {% for task in tareas_recibidas %}
                <li class="list-group-item d-flex justify-content-between small">
                    <div>
                        <strong>{{ task.title[:30] }}{% if task.title|length > 30 %}...{% endif %}</strong>
                        <br>
                        <small class="text-muted">
                            {{ task.status.replace('_', ' ').title() }}
                            {% if task.due_date %}(vence: {{ task.due_date.strftime('%d/%m') }}){% endif %}
                        </small>
                    </div>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p class="text-muted">No tienes tareas asignadas.</p>
            {% endif %}
        </div>
    </div>

    <!-- Tareas que he asignado -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-success text-white">
            <h6 class="mb-0"><i class="fas fa-paper-plane me-2"></i>Tareas que He Asignado</h6>
        </div>
        <div class="card-body">
            {% if tareas_asignadas %}
            <ul class="list-group">
                {% for task in tareas_asignadas %}
                <li class="list-group-item d-flex justify-content-between small">
                    <div>
                        <strong>{{ task.title[:30] }}{% if task.title|length > 30 %}...{% endif %}</strong>
                        <br>
                        <small class="text-muted">
                            â†’ {{ task.assistant.name }}
                            ({{ task.status.replace('_', ' ').title() }})
                        </small>
                    </div>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p class="text-muted">AÃºn no has asignado tareas.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}